{"remainingRequest":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/src/views/patientManage/patient.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/src/views/patientManage/patient.vue","mtime":1700918514888},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1700733288000},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/babel-loader/lib/index.js","mtime":1700733288000},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1700733288000},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/index.js","mtime":1700733288000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge21hcEdldHRlcnN9IGZyb20gJ3Z1ZXgnCmltcG9ydCB7ZGlhZ25vc2lzUGF0aWVudH0gZnJvbSAiQC9hcGkvdXNlci9wYXRpZW50IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGF0aWVudCcsCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWwogICAgICAndXNlcnR5cGUnCiAgICBdKQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHNob3dBdHRyaWJ1dGVzRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgZm9ybTogewogICAgICAgIGRvY3RvcjogJycsCiAgICAgICAgY2FzZWlkOiAnJywKICAgICAgICBwYXRpZW50QWdlOiAnJywKICAgICAgICBwYXRpZW50TmFtZTogJycsCiAgICAgICAgcGF0aWVudFNleDogJycsCiAgICAgICAgcGF0aWVudFdlaWdodDogJycsCiAgICAgICAgcmVwb3J0OiAnbm9uZScsCiAgICAgICAgZGF0ZTogJycsCiAgICAgICAgcGF0aWVudFBpYzogJycKICAgICAgfSwKICAgICAgZm9ybUxhYmVsV2lkdGg6ICcxMjBweCcsCiAgICAgIHBhZ2VTaXplOiA1LAogICAgICBwYWdlTnVtOiAxLAogICAgICB0b3RhbDogMCwKICAgICAga2V5OiAncGF0aWVudE5hbWUnLAogICAgICB2YWx1ZTogJycsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0UGF0aWVudExpc3QoMSkKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFBhdGllbnRMaXN0KHBhZ2VyID0gMSkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VyCiAgICAgIGNvbnN0IHtwYWdlTnVtLCBwYWdlU2l6ZX0gPSB0aGlzIC8vIOWPkemAgeivt+axguaXtuWAmemcgOimgeW4puWPguaVsAogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRBUEkucGF0aWVudC5yZXFQYXRpZW50cyhwYWdlTnVtLCBwYWdlU2l6ZSwgdGhpcy5rZXksIHRoaXMudmFsdWUpCiAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMubXNnCiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbAogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgY29uc29sZS5sb2coJ1Jlc3BvbnNlIE1lc3NhZ2U6JywgcmVzLm1zZykKICAgICAgfQogICAgfSwKICAgIHNob3dGb3JtKHJvdykgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLmZvcm0gPSB7Li4ucm93fQogICAgfSwKICAgIHNob3dBdHRyaWJ1dGVzRGlhbG9nKHJvdykgewogICAgICB0aGlzLnNob3dBdHRyaWJ1dGVzRGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy5mb3JtID0gey4uLnJvd30KICAgIH0sCiAgICBhc3luYyBvbkZvcm0oKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybSkKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kQVBJLnBhdGllbnQucmVxU2F2ZUFuZFVwZGF0ZVBhdGllbnRzKHRoaXMuZm9ybSkKICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAvLyDlhbPpl63ooajljZUKICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgICAvLyDmtojmga/mj5DnpLoKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip8hJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pCiAgICAgICAgYXdhaXQgdGhpcy5nZXRQYXRpZW50TGlzdCgxKQogICAgICB9CiAgICB9LAogICAgZGVsZXRlZChyb3cpIHsKICAgICAgdGhpcy4kY29uZmlybShg5L2g56Gu5a6a5Yig6ZmkICR7cm93LnBhdGllbnROYW1lfSDlkJc/YCwgJ+WIoOmZpCcsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJEFQSS5wYXRpZW50LmRlbFBhdGllbnRzKHJvdy5pZCkKICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0UGF0aWVudExpc3QoMSkKICAgICAgICAgICkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5aSx6LSlLOivt+iBlOezu+ezu+e7n+i/kOe7tCEnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgb25TdGF0ZSgpIHsKICAgICAgdGhpcy5nZXRQYXRpZW50TGlzdCgxKQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UobGltaXQpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IGxpbWl0CiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKQogICAgfSwKICAgIGFzeW5jIGRpYWdub3Npc1BhdGllbnQocm93KSB7CiAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgJ3BhdGllbnRpZCc6IHJvdy5pZCwKICAgICAgICAncGF0aWVudE5hbWUnOiByb3cucGF0aWVudE5hbWUKICAgICAgfQogICAgICB0aGlzLiRjb25maXJtKGDkvaDnoa7lrpror4rmlq0gJHtyb3cucGF0aWVudE5hbWV9IOWQlz9gLCAn5Yig6ZmkJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy4kQVBJLnBhdGllbnQuZGlhZ25vc2lzUGF0aWVudChkYXRhKQogICAgICAgIGlmIChyZXN1bHQuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBtZXNzYWdlOiAnJyArIHJvdy5wYXRpZW50TmFtZSArICcg5b6F6K+K5pat77yB6K+35Yiw6K+K5pat6K6w5b2V5Lit5p+l55yLJwogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtognCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["patient.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"patient.vue","sourceRoot":"src/views/patientManage","sourcesContent":["<template>\n  <div>\n    <div>\n      <div style=\"text-align: center\">\n        <el-select v-model=\"key\" style=\"width: 120px\" placeholder=\"请选择\">\n          <el-option label=\"患者名字\" value=\"patientName\"/>\n          <el-option label=\"诊治医师\" value=\"doctor\"/>\n          <el-option label=\"性别\" value=\"patientSex\"/>\n          <el-option label=\"年龄\" value=\"patientAge\"/>\n        </el-select>\n        <el-input v-model=\"value\" autocomplete=\"off\" style=\"width: 500px; margin: 20px\"/>\n        <el-button type=\"primary\" @click=\"onState\">搜素</el-button>\n      </div>\n      <el-button type=\"primary\" @click=\"showForm\">添加患者</el-button>\n\n    </div>\n    <el-table v-loading=\"loading\" :data=\"tableData\" style=\"width: 100%\">\n      <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"70\"/>\n      <el-table-column prop=\"id\" label=\"病例号\" align=\"center\" width=\"300\"/>\n      <el-table-column prop=\"patientName\" label=\"名字\" align=\"center\" width=\"300\"/>\n      <el-table-column prop=\"patientAge\" label=\"年龄\" align=\"center\" width=\"180\"/>\n      <el-table-column prop=\"patientSex\" label=\"性别\" align=\"center\" width=\"180\"/>\n      <el-table-column prop=\"date\" label=\"生日\" align=\"center\" width=\"180\"/>\n      <el-table-column prop=\"doctor\" label=\"主治医师\" align=\"center\"/>\n      <el-table-column prop=\"report\" label=\"报告\" align=\"center\" width=\"180\"/>\n      <el-table-column label=\"操作\" align=\"center\" width=\"300\">\n        <template v-slot=\"{row}\">\n          <el-button type=\"success\" size=\"mini\" @click=\"diagnosisPatient(row)\">诊断</el-button>\n          <el-button type=\"primary\" size=\"mini\" @click=\"showForm(row)\">编辑</el-button>\n          <el-button type=\"danger\" size=\"mini\" @click=\"deleted(row)\">删除</el-button>\n          <el-button type=\"info\" size=\"mini\" @click=\"showAttributesDialog(row)\">显示</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      style=\"margin-top: 20px;text-align: center\"\n      :current-page=\"pageNum\"\n      :page-size=\"pageSize\"\n      :total=\"total\"\n      :pager-count=\"5\"\n      :page-sizes=\"[5,15,30]\"\n      layout=\"prev,pager,next,jumper,->,sizes,total\"\n      @current-change=\"getPatientList\"\n      @size-change=\"handleSizeChange\"\n    />\n\n    <el-dialog :title=\"form.id ? '修改患者信息':'新增患者信息'\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"form\">\n        <el-form-item v-if=\"!form.id\" label=\"病例号\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.caseid\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"名字\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.patientName\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"年龄\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.patientAge\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"性别\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.patientSex\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"体重\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.patientWeight\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"生日\" :label-width=\"formLabelWidth\">\n          <el-date-picker v-model=\"form.date\" value-format=\"yyyy年MM月\" format=\"\" type=\"month\" placeholder=\"选择日期\"/>\n        </el-form-item>\n        <el-form-item label=\"主治医师\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.doctor\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"报告\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.report\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"onForm\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog :title=\"'患者信息'\" :visible.sync=\"showAttributesDialogVisible\">\n      <el-table :data=\"[form]\">\n        <el-table-column prop=\"id\" label=\"病例号\"></el-table-column>\n        <el-table-column prop=\"patientName\" label=\"名字\"></el-table-column>\n        <el-table-column prop=\"patientAge\" label=\"年龄\"></el-table-column>\n        <el-table-column prop=\"patientSex\" label=\"性别\"></el-table-column>\n        <el-table-column prop=\"patientWeight\" label=\"体重\"></el-table-column>\n        <el-table-column prop=\"date\" label=\"生日\"></el-table-column>\n        <el-table-column prop=\"doctor\" label=\"主治医师\"></el-table-column>\n      </el-table>\n      <el-table :data=\"[form]\">\n        <el-table-column prop=\"report\" label=\"报告\"></el-table-column>\n      </el-table>\n      <el-table :data=\"[form]\">\n        <el-table-column label=\"图片\">\n          <template slot-scope=\"scope\">\n            <img :src=\"scope.row.patientPic\" alt=\"病例图片\" style=\"max-width: 400px; max-height: 400px;\">\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showAttributesDialogVisible = false\">关闭</el-button>\n      </div>\n    </el-dialog>\n  </div>\n\n</template>\n\n<script>\n\nimport {mapGetters} from 'vuex'\nimport {diagnosisPatient} from \"@/api/user/patient\";\n\nexport default {\n  name: 'Patient',\n  computed: {\n    ...mapGetters([\n      'usertype'\n    ])\n  },\n  data() {\n    return {\n      tableData: [],\n      showAttributesDialogVisible: false,\n      dialogFormVisible: false,\n      form: {\n        doctor: '',\n        caseid: '',\n        patientAge: '',\n        patientName: '',\n        patientSex: '',\n        patientWeight: '',\n        report: 'none',\n        date: '',\n        patientPic: ''\n      },\n      formLabelWidth: '120px',\n      pageSize: 5,\n      pageNum: 1,\n      total: 0,\n      key: 'patientName',\n      value: '',\n      loading: false,\n    }\n  },\n  mounted() {\n    this.getPatientList(1)\n  },\n  methods: {\n    async getPatientList(pager = 1) {\n      this.loading = true\n      this.pageNum = pager\n      const {pageNum, pageSize} = this // 发送请求时候需要带参数\n      const res = await this.$API.patient.reqPatients(pageNum, pageSize, this.key, this.value)\n      if (res.code === 200) {\n        this.tableData = res.msg\n        this.total = res.total\n        this.loading = false\n        console.log('Response Message:', res.msg)\n      }\n    },\n    showForm(row) {\n      this.dialogFormVisible = true\n      this.form = {...row}\n    },\n    showAttributesDialog(row) {\n      this.showAttributesDialogVisible = true\n      this.form = {...row}\n    },\n    async onForm() {\n      console.log(this.form)\n      const res = await this.$API.patient.reqSaveAndUpdatePatients(this.form)\n      if (res.code === 200) {\n        // 关闭表单\n        this.dialogFormVisible = false\n        // 消息提示\n        this.$message({\n          message: '修改成功!',\n          type: 'success'\n        })\n        await this.getPatientList(1)\n      }\n    },\n    deleted(row) {\n      this.$confirm(`你确定删除 ${row.patientName} 吗?`, '删除', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        const result = await this.$API.patient.delPatients(row.id)\n        if (result.code === 200) {\n          this.$notify({\n              type: 'success',\n              message: '删除成功!'\n            },\n            await this.getPatientList(1)\n          )\n        } else {\n          this.$notify({\n            type: 'warning',\n            message: '删除失败,请联系系统运维!'\n          })\n        }\n      }).catch(() => {\n        this.$notify({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    },\n    onState() {\n      this.getPatientList(1)\n    },\n    handleSizeChange(limit) {\n      this.pageSize = limit\n      this.getUserList()\n    },\n    async diagnosisPatient(row) {\n      const data = {\n        'patientid': row.id,\n        'patientName': row.patientName\n      }\n      this.$confirm(`你确定诊断 ${row.patientName} 吗?`, '删除', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        const result = await this.$API.patient.diagnosisPatient(data)\n        if (result.code === 200) {\n          this.$notify({\n              type: 'success',\n              message: '' + row.patientName + ' 待诊断！请到诊断记录中查看'\n            }\n          )\n        }\n      }).catch(() => {\n        this.$notify({\n          type: 'info',\n          message: '已取消'\n        })\n      })\n    },\n  }\n}\n</script>\n\n<style scoped>\n.flex-container {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.flex-item {\n  flex: 0 0 33.33%;\n  box-sizing: border-box;\n  padding: 5px; /* 调整列之间的间距 */\n}\n\n</style>\n"]}]}