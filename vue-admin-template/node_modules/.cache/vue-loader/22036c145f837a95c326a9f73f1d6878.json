{"remainingRequest":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/src/views/patientManage/user.vue?vue&type=style&index=0&lang=stylus-loader&rel=stylesheet%2Fstylus&","dependencies":[{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/src/views/patientManage/user.vue","mtime":1702016800156},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1700932421620},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/index.js","mtime":1700932427812}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVkaXREb2N0b3IgLmJsb2NrCiAgcG9zaXRpb246YWJzb2x1dGUKLmVkaXREb2N0b3IgLnRpdHRsZQogIGRpc3BsYXk6YmxvY2sKICB0ZXh0LWFsaWduOiBjZW50ZXIKICBmb250LXNpemU6MjRweAogIGZvbnQtd2VpZ2h0OjYwMAogIGxpbmUtaGVpZ2h0OjgwcHgKLmVkaXREb2N0b3IgLnNlYXJjaAogIG1hcmdpbi1ib3R0b206MzBweAo="},{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user.vue","sourceRoot":"src/views/patientManage","sourcesContent":["<template>\n  <div class=\"editDoctor\">\n    <span class=\"tittle\">医生信息表</span>\n    <div class=\"search\">\n     <el-input style=\"width: 200px;\" placeholder=\"医生姓名\" v-model=\"searchName\"></el-input>\n     <el-button  type=\"primary\" icon=\"search\" @click=\"search\">搜索</el-button>\n     <el-button  type=\"primary\" icon=\"\" @click=\"getAll\">显示全部</el-button>\n     <el-button class=\"filter-item\" type=\"primary\" icon=\"document\" @click=\"handleDownload\">导出</el-button>\n    </div>\n    <!-- 表格 -->\n    <el-table :data=\"doctorlist\" border style=\"width: 100%;\">\n      <el-table-column fixed prop=\"index\" label=\"序号\" width=\"100\">\n        <template scope=\"scope\">\n          {{scope.$index}}\n        </template>\n      </el-table-column>\n      <el-table-column fixed prop=\"name\" label=\"姓名\" width=\"150\">\n      </el-table-column>\n      <el-table-column fixed prop=\"sex\" label=\"性别\" width=\"150\">\n      </el-table-column>\n      <el-table-column fixed  label=\"入职日期\" width=\"150\">\n        <template scope=\"scope\">\n          {{scope.row.date}}\n        </template>\n      </el-table-column>\n      <el-table-column fixed prop=\"degree\" label=\"学历\" width=\"150\">\n      </el-table-column>\n      <el-table-column fixed prop=\"major\" label=\"专业\" width=\"150\">\n      </el-table-column>\n      <el-table-column fixed prop=\"profession\" label=\"职称\" width=\"150\">\n      </el-table-column>\n      <el-table-column fixed prop=\"office\" label=\"科室\" width=\"150\">\n      </el-table-column>\n      <el-table-column fixed=\"right\" prop=\"operate\" label=\"操作\" width=\"150\">\n        <template scope=\"scope\">\n          <el-button @click.native.prevent=\"edictDoctor(scope.$index)\" type=\"primary\" size=\"small\">编辑</el-button>\n          <el-button @click.native.prevent=\"delectDoctor(scope.$index, doctorlist)\" type=\"danger\" size=\"small\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 表格 -->\n    <!-- dialog对话框 -->\n    <el-dialog title=\"医生信息修改\" :visible.sync=\"dialogFormVisible\">\n      <el-form>\n        <el-form-item label=\"姓名\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"doctorlistedit.name\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\"  :label-width=\"formLabelWidth\">\n          <el-radio class=\"radio\" v-model=\"doctorlistedit.sex\" label=\"男\">男</el-radio>\n          <el-radio class=\"radio\" v-model=\"doctorlistedit.sex\" label=\"女\">女</el-radio>\n        </el-form-item>\n        <el-form-item label=\"入职日期\" prop=\"date\" :label-width=\"formLabelWidth\">\n            <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"doctorlistedit.date\" style=\"width: 100%;\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"学历\" :label-width=\"formLabelWidth\">\n          <el-select v-model=\"doctorlistedit.degree\" placeholder=\"请选择\" style=\"width: 100%;\">\n            <el-option label=\"大专\" name=\"junior\" value=\"大专\"></el-option>\n            <el-option label=\"本科\" name=\"undergraduate\" value=\"本科\"></el-option>\n            <el-option label=\"研究生\" name=\"postgraduate\" value=\"研究生\"></el-option>\n            <el-option label=\"博士\" name=\"doctor\" value=\"博士\"></el-option>\n            <el-option label=\"硕士\" name=\"master\" value=\"硕士\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"专业\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"doctorlistedit.major\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"职称\"  :label-width=\"formLabelWidth\">\n          <el-input v-model=\"doctorlistedit.profession\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室\"  :label-width=\"formLabelWidth\">\n          <el-input v-model=\"doctorlistedit.office\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"updateDoctor\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <!-- dialog对话框 -->\n    <div class=\"block\">\n      <span class=\"demonstration\">调整每页显示条数</span>\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page.sync=\"currentPage\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"10\" layout=\"sizes, prev, pager, next\" :total=\"100\">\n      </el-pagination>\n    </div>\n  </div>\n\n</template>\n\n<script type=\"text/ecmascript-6\">\n    import {api} from '../../../global/api.js';\n    export default {\n      data () {\n        return {\n          // 获取json存放在doctorlist里面\n          doctorlist: [],\n          // 对话框的修改存放\n          doctorlistedit: [],\n          // 搜索相同名字时存放\n          searchList: [],\n          searchName: '',\n          dialogFormVisible: false,\n          // 表单input的限制长度\n          formLabelWidth: '60px',\n          // 获取当前行的序号存放在Index\n          Index: '',\n          currentPage: 5\n        };\n      },\n      methods: {\n        // 导出信息表的具体方法\n        handleDownload () {\n        // 导出\n          var vm = this;\n          require.ensure([], () => {\n            const { export_json_to_excel } = require('vendor/Export2Excel');\n            const tHeader = ['姓名', '性别', '入职日期', '学历', '专业', '职称', '科室'];\n            const filterVal = ['name', 'sex', 'date', 'degree', 'major', 'profession', 'office'];\n            const doctorlist = vm.doctorlist;\n            const data = vm.formatJson(filterVal, doctorlist);\n            export_json_to_excel(tHeader, data, '医生信息列表excel');\n          });\n        },\n        formatJson (filterVal, jsonData) {\n          return jsonData.map(v => filterVal.map(j => v[j]));\n        },\n        // 导出信息表\n        // 搜索\n        search () {\n          let intendedSearch = this;\n          intendedSearch.$http.get(api.doctor, {params: {name: intendedSearch.searchName}}).then((response) => {\n              // 遍历接口里的所有信息，查找drugname为搜索框里输入的内容的数据，然后把所有找到的数据push进this.tableData里\n              // 在把查找到的数据存进this.tableData里之前，需要把它置为空\n            intendedSearch.doctorlist = [];\n            for (let i = 0; i < response.data.doctorlist.length; i++) {\n              if (response.data.doctorlist[i].name === intendedSearch.searchName) {\n                intendedSearch.doctorlist.push(response.data.doctorlist[i]);\n              }\n            };\n            console.log(intendedSearch.searchList);\n          }, response => {\n            // error callback\n            intendedSearch.$notify.error({\n              message: '数据请求失败'\n            });\n          });\n        },\n        // 搜索\n        // 显示全部\n        getAll () {\n          this.doctorlist = this.searchList;\n        },\n        // 点击编辑按钮执行的方法\n        edictDoctor (index) {\n          this.dialogFormVisible = true;\n          this.Index = index;             // 存放当前行的序号\n          this.doctorlistedit = this.doctorlist[index];  // 获取当前行的数据\n          // 编辑前的日期\n          console.log('编辑前的日期', this.doctorlistedit.date);\n        },\n        // 点击删除按钮执行的方法\n        delectDoctor (index, rows) {\n          console.log('该行对象内容', rows[index]);    // 打印该行对象内容\n          rows.splice(index, 1);    // 1代表从当前列表开始删除的行数\n        },\n        updateDoctor () {\n          this.dialogFormVisible = false;\n          // 编辑后没转化格式的日期\n          console.log('编辑后没转化格式的日期', this.doctorlistedit.date);\n          // 转换时间格式\n          let year = this.doctorlistedit.date.getFullYear();\n          let month = this.doctorlistedit.date.getMonth() + 1;\n          let day = this.doctorlistedit.date.getDate();\n          let dateFormat = year + '-' + month + '-' + day;\n          // console.log(this.doctorlistedit);\n          this.doctorlistedit.date = dateFormat;\n          // this.$http.get(api.doctor, this.doctorlistedit).then(function () {\n          this.doctorlist[this.Index] = this.doctorlistedit;\n          // this.doctorlist[this.Index].date = dateFormat;\n          this.$message({\n            message: '医生信息修改成功',\n            type: 'success'\n          });\n          console.log('编辑后完成转化格式的日期', this.doctorlistedit.date);\n          // }, function () {\n          //   this.$message.error('医生信息修改失败');\n          // });\n        },\n        handleSizeChange (val) {\n          console.log(`每页 ${val} 条`);\n        },\n        handleCurrentChange (val) {\n          console.log(`当前页: ${val}`);\n        }\n      },\n      created () {\n        this.$http.get(api.doctor).then((response) => {             // mark\n          this.doctorlist = response.body.doctorlist;\n          this.searchList = response.body.doctorlist;\n        }, response => {\n          // error callback\n          this.$message({\n            message: '数据请求失败',\n            type: 'error'\n          });\n        });\n      }\n    };\n</script>\n\n<style lang=\"stylus-loader\" rel=\"stylesheet/stylus\">\n.editDoctor .block\n  position:absolute\n.editDoctor .tittle\n  display:block\n  text-align: center\n  font-size:24px\n  font-weight:600\n  line-height:80px\n.editDoctor .search\n  margin-bottom:30px\n</style>\n"]}]}