{"remainingRequest":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/src/views/patientManage/patient.vue?vue&type=style&index=0&id=49e22516&scoped=true&lang=css&","dependencies":[{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/src/views/patientManage/patient.vue","mtime":1702300845262},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/css-loader/dist/cjs.js","mtime":1702214741993},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1702214744817},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/postcss-loader/src/index.js","mtime":1702214743077},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1702214739870},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/index.js","mtime":1702214743778}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmZsZXgtY29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogd3JhcDsKfQoKLmZsZXgtaXRlbSB7CiAgZmxleDogMCAwIDMzLjMzJTsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIHBhZGRpbmc6IDVweDsgLyog6LCD5pW05YiX5LmL6Ze055qE6Ze06LedICovCn0KCi5hbGx7CiAgaGVpZ2h0OiA3MDBweDsKICB3aWR0aDogMTE2MHB4OwogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogIGJveC1zaGFkb3c6IDAgMTVweCAzMHB4IHJnYmEoMCwwLDAsLjMpOwp9CgouYWRkewogIG1hcmdpbi1sZWZ0OiAzMHB4OwogIG1hcmdpbi1ib3R0b206IDMwcHg7Cn0K"},{"version":3,"sources":["patient.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+PA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"patient.vue","sourceRoot":"src/views/patientManage","sourcesContent":["<template>\n  <div class=\"all\">\n    <div>\n      <div style=\"text-align: center\">\n        <el-select v-model=\"key\" style=\"width: 120px\" placeholder=\"请选择\">\n          <el-option label=\"患者名字\" value=\"patientName\"/>\n          <el-option label=\"诊治医师\" value=\"doctor\"/>\n          <el-option label=\"性别\" value=\"patientSex\"/>\n          <el-option label=\"年龄\" value=\"patientAge\"/>\n        </el-select>\n        <el-input v-model=\"value\" autocomplete=\"off\" style=\"width: 500px; margin: 20px\"/>\n        <el-button type=\"primary\" @click=\"onState\">搜素</el-button>\n      </div>\n      <el-button class=\"add\" type=\"primary\" icon=\"el-icon-edit\" @click=\"showForm\">添加患者</el-button>\n\n    </div>\n    <el-table :header-cell-style=\"{background:'#f5f7fa',color:'#606266'}\" v-loading=\"loading\" :data=\"tableData\" style=\"width: 100%\">\n      <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"70\"/>\n      <el-table-column prop=\"id\" label=\"病例号\" align=\"center\" width=\"300\"/>\n      <el-table-column prop=\"patientName\" label=\"名字\" align=\"center\" width=\"300\"/>\n      <el-table-column prop=\"patientAge\" label=\"年龄\" align=\"center\" width=\"180\"/>\n      <el-table-column prop=\"patientSex\" label=\"性别\" align=\"center\" width=\"180\"/>\n      <el-table-column prop=\"date\" label=\"生日\" align=\"center\" width=\"180\"/>\n      <el-table-column prop=\"doctor\" label=\"主治医师\" align=\"center\"/>\n      <el-table-column label=\"操作\" align=\"center\" width=\"330\" fixed=\"right\">\n        <template v-slot=\"{row}\">\n          <el-button type=\"success\" size=\"mini\" @click=\"diagnosisPatient(row)\">诊断</el-button>\n          <el-button type=\"primary\" size=\"mini\" @click=\"showForm(row)\">编辑</el-button>\n          <el-button type=\"danger\" size=\"mini\" @click=\"deleted(row)\">删除</el-button>\n          <el-button type=\"info\" size=\"mini\" @click=\"showAttributesDialog(row)\">显示</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      style=\"margin-top: 20px;text-align: center\"\n      :current-page=\"pageNum\"\n      :page-size=\"pageSize\"\n      :total=\"total\"\n      :pager-count=\"10\"\n      :page-sizes=\"[10,15,30]\"\n      layout=\"prev,pager,next,jumper,->,sizes,total\"\n      @current-change=\"getPatientList\"\n      @size-change=\"handleSizeChange\"\n    />\n\n    <el-dialog :title=\"form.id ? '修改患者信息':'新增患者信息'\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"form\">\n        <el-form-item v-if=\"!form.id\" label=\"病例号\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.caseid\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"名字\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.patientName\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"年龄\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.patientAge\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"性别\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.patientSex\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"体重\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.patientWeight\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"生日\" :label-width=\"formLabelWidth\">\n          <el-date-picker v-model=\"form.date\" value-format=\"yyyy年MM月\" format=\"\" type=\"month\" placeholder=\"选择日期\"/>\n        </el-form-item>\n        <el-form-item label=\"主治医师\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.doctor\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n        <el-form-item label=\"报告\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.report\" autocomplete=\"off\" style=\"width: 300px;\"/>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"onForm\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog :title=\"'患者信息'\" :visible.sync=\"showAttributesDialogVisible\">\n      <el-table :data=\"[form]\">\n        <el-table-column prop=\"id\" label=\"病例号\"></el-table-column>\n        <el-table-column prop=\"patientName\" label=\"名字\"></el-table-column>\n        <el-table-column prop=\"patientAge\" label=\"年龄\"></el-table-column>\n        <el-table-column prop=\"patientSex\" label=\"性别\"></el-table-column>\n        <el-table-column prop=\"patientWeight\" label=\"体重\"></el-table-column>\n        <el-table-column prop=\"date\" label=\"生日\"></el-table-column>\n        <el-table-column prop=\"doctor\" label=\"主治医师\"></el-table-column>\n      </el-table>\n      <el-table :data=\"[form]\">\n        <el-table-column prop=\"report\" label=\"报告\"></el-table-column>\n      </el-table>\n      <el-table :data=\"[form]\">\n        <el-table-column label=\"图片\">\n          <template slot-scope=\"scope\">\n            <img :src=\"scope.row.patientPic\" alt=\"病例图片\" style=\"max-width: 400px; max-height: 400px;\">\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"saveReport(form)\">导出报告</el-button>\n        <el-button @click=\"showAttributesDialogVisible = false\">关闭</el-button>\n      </div>\n    </el-dialog>\n  </div>\n\n</template>\n\n<script>\n\nimport {mapGetters} from 'vuex'\n\nexport default {\n  name: 'Patient',\n  computed: {\n    ...mapGetters([\n      'usertype'\n    ])\n  },\n  data() {\n    return {\n      tableData: [],\n      showAttributesDialogVisible: false,\n      dialogFormVisible: false,\n      form: {\n        doctor: '',\n        caseid: '',\n        patientAge: '',\n        patientName: '',\n        patientSex: '',\n        patientWeight: '',\n        report: 'none',\n        date: '',\n        patientPic: ''\n      },\n      formLabelWidth: '120px',\n      pageSize: 10,\n      pageNum: 1,\n      total: 0,\n      key: 'patientName',\n      value: '',\n      loading: false\n    }\n  },\n  mounted() {\n    this.getPatientList(1)\n  },\n  methods: {\n    async getPatientList(pager = 1) {\n      this.loading = true\n      this.pageNum = pager\n      const { pageNum, pageSize } = this // 发送请求时候需要带参数\n      const res = await this.$API.patient.reqPatients(pageNum, pageSize, this.key, this.value)\n      if (res.code === 200) {\n        this.tableData = res.msg\n        this.total = res.total\n        this.loading = false\n        console.log('Response Message:', res.msg)\n      }\n    },\n    async saveReport(form) {\n      const res = await this.$API.patient.saveReport(form)\n      if (res.code === 200) {\n        this.$message({\n          message: '导出成功!',\n          type: 'success'\n        })\n      }\n    },\n    showForm(row) {\n      this.dialogFormVisible = true\n      this.form = {...row}\n    },\n    showAttributesDialog(row) {\n      this.showAttributesDialogVisible = true\n      this.form = {...row}\n    },\n    async onForm() {\n      const res = await this.$API.patient.reqSaveAndUpdatePatients(this.form)\n      if (res.code === 200) {\n        // 关闭表单\n        this.dialogFormVisible = false\n        // 消息提示\n        this.$message({\n          message: '修改成功!',\n          type: 'success'\n        })\n        await this.getPatientList(1)\n      }\n    },\n    deleted(row) {\n      this.$confirm(`你确定删除 ${row.patientName} 吗?`, '删除', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        const result = await this.$API.patient.delPatients(row.id)\n        if (result.code === 200) {\n          this.$notify({\n              type: 'success',\n              message: '删除成功!'\n            },\n            await this.getPatientList(1)\n          )\n        } else {\n          this.$notify({\n            type: 'warning',\n            message: '删除失败,请联系系统运维!'\n          })\n        }\n      }).catch(() => {\n        this.$notify({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    },\n    onState() {\n      this.getPatientList(1)\n    },\n    handleSizeChange(limit) {\n      this.pageSize = limit\n      this.getUserList()\n    },\n    async diagnosisPatient(row) {\n      const data = {\n        'patientid': row.id,\n        'patientName': row.patientName\n      }\n      this.$confirm(`你确定诊断 ${row.patientName} 吗?`, '删除', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        const result = await this.$API.patient.diagnosisPatient(data)\n        if (result.code === 200) {\n          this.$notify({\n              type: 'success',\n              message: '' + row.patientName + ' 待诊断！请到诊断记录中查看'\n            }\n          )\n        }\n      }).catch(() => {\n        this.$notify({\n          type: 'info',\n          message: '已取消'\n        })\n      })\n    },\n  }\n}\n</script>\n\n<style scoped>\n.flex-container {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.flex-item {\n  flex: 0 0 33.33%;\n  box-sizing: border-box;\n  padding: 5px; /* 调整列之间的间距 */\n}\n\n.all{\n  height: 700px;\n  width: 1160px;\n  background-color: white;\n  box-shadow: 0 15px 30px rgba(0,0,0,.3);\n}\n\n.add{\n  margin-left: 30px;\n  margin-bottom: 30px;\n}\n</style>\n"]}]}