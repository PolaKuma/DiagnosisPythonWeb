{"remainingRequest":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/src/views/patientManage/shift.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/src/views/patientManage/shift.vue","mtime":1702092302822},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/css-loader/dist/cjs.js","mtime":1700932422321},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1700932427812},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/postcss-loader/src/index.js","mtime":1700932425787},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1700932421620},{"path":"/Users/junjie/Documents/GitHub/Untitled/vue-admin-template/node_modules/vue-loader/lib/index.js","mtime":1700932427812}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5zaGlmdHsKICBoZWlnaHQ6IDcwMHB4OwogIHdpZHRoOiAxMTYwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgYm94LXNoYWRvdzogMCAxNXB4IDMwcHggcmdiYSgwLDAsMCwuMyk7Cn0KCi5zZWFyY2ggewogIHBhZGRpbmc6IDMwcHg7CiAgcGFkZGluZy1ib3R0b206IDEwcHg7Cn0KCi5lbC1idXR0b24gewogIG1hcmdpbi1sZWZ0OiAxMHB4OwogIG1hcmdpbi1ib3R0b206IDMwcHg7CiAgYm9yZGVyLXJhZGl1czogMTAlOwogIG1hcmdpbi1sZWZ0OiAzMHB4Owp9Cg=="},{"version":3,"sources":["shift.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkUA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"shift.vue","sourceRoot":"src/views/patientManage","sourcesContent":["<template>\n  <div class=\"shift\">\n    <div class=\"title\">\n    </div>\n    <div class=\"search\">\n      <el-input @keyup.enter.native=\"handleFilter\" style=\"width: 200px;\" class=\"filter-item\" placeholder=\"请输入姓名\"\n                v-model=\"searchName\"></el-input>\n      <el-input @keyup.enter.native=\"handleFilter\" style=\"width: 200px;\" class=\"filter-item\" placeholder=\"请输入科室\"\n                v-model=\"searchDepartment\"></el-input>\n      <!-- <el-select clearable class=\"filter-item\" style=\"width: 130px\" placeholder=\"科室\" v-model=\"searchDepartment\">\n        <el-option v-for=\"item in typeOptions\" :key=\"item.key\" :label=\"item.display_name+'('+item.key+')'\" :value=\"item.key\">\n        </el-option>\n      </el-select> -->\n      <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handelSearch\">搜索</el-button>\n      <el-button type=\"primary\" icon=\"\" @click=\"getAll\">显示全部</el-button>\n      <el-button class=\"filter-item\" type=\"primary\" @click=\"handelCreate\" icon=\"el-icon-edit\">添加</el-button>\n      <el-button class=\"filter-item\" type=\"primary\" @click=\"handleDelAll\" icon=\"el-icon-delete\">全部删除</el-button>\n      <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-share\" @click=\"handleDownload\">导出</el-button>\n    </div>\n\n    <el-table :header-cell-style=\"{background:'#f5f7fa',color:'#606266'}\" v-if=\"table\" :data=\"table\" border style=\"width: 100%\" height=\"400\">\n      <el-table-column label=\"序号\" width=\"120\" fixed>\n        <template scope=\"scope\">{{ scope.$index }}</template>\n      </el-table-column>\n      <el-table-column prop=\"date\" fixed label=\"日期\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"time\" label=\"时段\" width=\"200\"></el-table-column>\n      <el-table-column prop=\"name\" label=\"姓名\" width=\"150\"></el-table-column>\n      <el-table-column prop=\"sex\" label=\"性别\" width=\"150\"></el-table-column>\n      <el-table-column prop=\"department\" label=\"科室\" width=\"150\"></el-table-column>\n      <el-table-column prop=\"phone\" label=\"电话号码\" width=\"150\"></el-table-column>\n      <el-table-column prop=\"attendence\" label=\"出勤情况\" width=\"120\" v-model=\"listQuery.type\"></el-table-column>\n      <el-table-column prop=\"signature\" label=\"负责人\" width=\"120\"></el-table-column>\n      <el-table-column align=\"center\" label=\"操作\" fixed=\"right\" width=\"200px\">\n        <template scope=\"scope\">\n          <el-button size=\"small\" @click=\"handleEdit(scope.$index)\">编辑</el-button>\n          <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      style=\"margin-top: 20px;text-align: center\"\n      :current-page=\"pageNum\"\n      :page-size=\"pageSize\"\n      :total=\"total\"\n      :pager-count=\"10\"\n      :page-sizes=\"[10,15,30]\"\n      layout=\"prev,pager,next,jumper,->,sizes,total\"\n      @current-change=\"getUserList\"\n      @size-change=\"handleSizeChange\"\n    />\n\n    <!--  添加信息表单 -->\n    <el-dialog title=\"添加信息\" :visible.sync=\"dialogFormVisible\">\n      <el-form class=\"small-space\" :model=\"form\" label-position=\"left\" label-width=\"70px\"\n               style='width: 400px; margin-left:50px;'>\n        <el-form-item label=\"姓名\">\n          <el-input v-model=\"form.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"日期\">\n          <el-input v-model=\"form.date\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"值班时间\">\n          <el-select v-model=\"form.time\" placeholder=\"请选择值班时间\">\n            <el-option label=\"早班 8：00-16：00\" value=\"早班 8：00-16：00\"></el-option>\n            <el-option label=\"白班 8：00-17：00\" value=\"白班 8：00-17：00\"></el-option>\n            <el-option label=\"小夜 16：00-24：00\" value=\"小夜 16：00-24：00\"></el-option>\n            <el-option label=\"大夜 24：00-8：00\" value=\"大夜 24：00-8：00\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-radio-group v-model=\"form.sex\">\n            <el-radio label=\"男\"></el-radio>\n            <el-radio label=\"女\"></el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"科室\">\n          <el-input v-model=\"form.department\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"电话号码\">\n          <el-input v-model=\"form.phone\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"负责人\">\n          <el-input v-model=\"form.signature\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleCreateSubmit\">确 定</el-button>\n        <el-button type=\"primary\" @click=\"resetForm('form')\">重置</el-button>\n      </div>\n    </el-dialog>\n    <!-- 编辑信息表单 -->\n    <el-dialog title=\"修改值班信息\" :visible.sync=\"dialogFormEditVisible\">\n      <el-form class=\"small-space\" :model=\"form\" label-position=\"left\" label-width=\"70px\"\n               style='width: 400px; margin-left:50px;'>\n        <el-form-item label=\"姓名\">\n          <el-input v-model=\"tableEdit.name\" placeholder=\"必填\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"日期\">\n          <el-input v-model=\"tableEdit.date\" placeholder=\"必填\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"值班时间\">\n          <el-select v-model=\"tableEdit.time\" placeholder=\"请选择值班时间\">\n            <el-option label=\"早班 8：00-16：00\" value=\"早班 8：00-16：00\"></el-option>\n            <el-option label=\"白班 8：00-17：00\" value=\"白班 8：00-17：00\"></el-option>\n            <el-option label=\"小夜 16：00-24：00\" value=\"小夜 16：00-24：00\"></el-option>\n            <el-option label=\"大夜 24：00-8：00\" value=\"大夜 24：00-8：00\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-radio-group v-model=\"tableEdit.sex\">\n            <el-radio label=\"男\"></el-radio>\n            <el-radio label=\"女\"></el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"科室\">\n          <el-input v-model=\"tableEdit.department\" placeholder=\"必填\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"电话号码\">\n          <el-input v-model=\"tableEdit.phone\" placeholder=\"必填\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"出勤情况\">\n          <el-select v-model=\"tableEdit.attendence\" placeholder=\"必填\">\n            <el-option label=\"上班\" value=\"上班\"></el-option>\n            <el-option label=\"休息\" value=\"休息\"></el-option>\n            <el-option label=\"请假\" value=\"请假\"></el-option>\n            <el-option label=\"早退\" value=\"早退\"></el-option>\n            <el-option label=\"迟到\" value=\"迟到\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"护士长签名\">\n          <el-input v-model=\"tableEdit.signature\" placeholder=\"必填\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormEditVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleEditSubmit\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  data() {\n    return {\n      table: [],\n      tableEdit: [],\n      searchList: [],\n      searchName: '',\n      searchDepartment: '',\n      listQuery: {\n        type: null\n      },\n      dialogFormVisible: false,\n      dialogFormEditVisible: false,\n      form: {\n        name: '',\n        date: '',\n        time: '',\n        phone: '',\n        attendence: '',\n        department: '',\n        sex: '',\n        signature: ''\n      },\n      typeOptions: [\n        {key: '001', display_name: '妇科'},\n        {key: '002', display_name: '儿科'},\n        {key: '003', display_name: '助产科'},\n        {key: '004', display_name: '精神科'},\n        {key: '005', display_name: '急诊科'},\n        {key: '006', display_name: '牙科'},\n        {key: '007', display_name: '外科'},\n        {key: '008', display_name: '内科'}\n      ]\n    };\n  },\n  methods: {\n    // 编辑\n    handleEdit(index) {\n      this.dialogFormEditVisible = true;\n      this.Index = shift;\n      this.tableEdit = this.table[shift];\n    },\n    handleEditSubmit(index) {\n      this.dialogFormEditVisible = false;\n      let oldDate = this.tableEdit.date;\n      let year = new Date(oldDate).getFullYear();\n      let month = new Date(oldDate).getMonth() + 1;\n      let day = new Date(oldDate).getDate();\n      let dateFormat = year + '-' + month + '-' + day;\n      this.tableEdit.date = dateFormat;\n      console.log(dateFormat);\n      this.table[shift] = this.tableEdit;\n      this.$message({\n        message: '轮班修改成功！',\n        type: 'success'\n      });\n    },\n    // 搜索\n    handelSearch() {\n      let intendedSearch = this;\n      intendedSearch.$http.get(api.table_shift, {\n        params: {\n          name: intendedSearch.searchName,\n          department: intendedSearch.searchDepartment\n        }\n      }).then((response) => {\n        intendedSearch.table = [];\n        for (let i = 0; i < response.data.table.length; i++) {\n          if (response.data.table[i].name === intendedSearch.searchName && response.data.table[i].department === intendedSearch.searchDepartment) {\n            intendedSearch.table.push(response.data.table[i]);\n          } else if (response.data.table[i].name === intendedSearch.searchName) {\n            intendedSearch.table.push(response.data.table[i]);\n          } else if (response.data.table[i].department === intendedSearch.searchDepartment) {\n            intendedSearch.table.push(response.data.table[i]);\n          }\n        }\n        ;\n      }, response => {\n        // error callback\n        intendedSearch.$notify.error({\n          message: '数据请求失败'\n        });\n      });\n    },\n    // 显示全部\n    getAll() {\n      this.table = this.searchList;\n      this.searchName = '';\n    },\n    // 删除\n    handleDelete(index, row) {\n      let vm = this;\n      console.log('单个删除选择的row: ', shift, '-----', row);\n      vm.table.splice(shift, 1);\n      this.$message({\n        message: '删除成功！',\n        type: 'success'\n      });\n    },\n    // 显示全部\n    handleDelAll() {\n      this.table = [];\n    },\n    // 添加\n    handelCreate() {\n      this.dialogFormVisible = true;\n      this.formClear();\n    },\n    // 添加提交\n    handleCreateSubmit() {\n      let vm = this;\n      console.log('修改后的信息：', vm.form, vm.table);\n      vm.table.push(vm.form);\n      this.dialogFormVisible = false;\n      this.$message({\n        message: '轮班信息添加成功！',\n        type: 'success'\n      });\n    },\n    // 清空表单\n    formClear() {\n      this.form = {\n        name: '',\n        time: '',\n        phone: '',\n        attendence: '',\n        department: '',\n        sex: '',\n        signature: ''\n      };\n    },\n    // 重置表单\n    resetForm() {\n      this.form = {\n        name: '',\n        time: '',\n        phone: '',\n        attendence: '',\n        department: '',\n        sex: '',\n        signature: ''\n      };\n    }\n  },\n  created() {\n    // Sample data for your table\n    this.table = [\n      {\n        date: '2023-01-01',\n        time: '早班 8:00-16:00',\n        name: 'Nurse 1',\n        sex: 'Female',\n        department: '妇科',\n        phone: '123-456-7890',\n        attendence: '上班',\n        signature: 'Nurse Manager 1'\n      },\n      {\n        date: '2023-01-02',\n        time: '白班 8:00-17:00',\n        name: 'Nurse 2',\n        sex: 'Male',\n        department: '儿科',\n        phone: '987-654-3210',\n        attendence: '上班',\n        signature: 'Nurse Manager 2'\n      },\n      // Add more entries as needed\n    ];\n\n    // Populate searchList for use with 'Show All' button\n    this.searchList = this.table;\n  }\n};\n</script>\n\n<style>\n.shift{\n  height: 700px;\n  width: 1160px;\n  background-color: white;\n  box-shadow: 0 15px 30px rgba(0,0,0,.3);\n}\n\n.search {\n  padding: 30px;\n  padding-bottom: 10px;\n}\n\n.el-button {\n  margin-left: 10px;\n  margin-bottom: 30px;\n  border-radius: 10%;\n  margin-left: 30px;\n}\n</style>\n"]}]}