{"remainingRequest":"/Users/junjie/Documents/GitHub/CancerPythonWeb-test/vue-admin-template/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/junjie/Documents/GitHub/CancerPythonWeb-test/vue-admin-template/src/views/pages/chatHome/chatwindow.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/junjie/Documents/GitHub/CancerPythonWeb-test/vue-admin-template/src/views/pages/chatHome/chatwindow.vue","mtime":1700716776592},{"path":"/Users/junjie/Documents/GitHub/CancerPythonWeb-test/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1700658976000},{"path":"/Users/junjie/Documents/GitHub/CancerPythonWeb-test/vue-admin-template/node_modules/babel-loader/lib/index.js","mtime":1700658976000},{"path":"/Users/junjie/Documents/GitHub/CancerPythonWeb-test/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1700658976000},{"path":"/Users/junjie/Documents/GitHub/CancerPythonWeb-test/vue-admin-template/node_modules/vue-loader/lib/index.js","mtime":1700658976000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFuaW1hdGlvbiB9IGZyb20gJ0AvdXRpbHMvdXRpbCcKCmltcG9ydCBIZWFkUG9ydHJhaXQgZnJvbSAnQC9jb21wb25lbnRzL0hlYWRQb3J0cmFpdC52dWUnCmltcG9ydCBFbW9qaSBmcm9tICdAL2NvbXBvbmVudHMvRW1vamkudnVlJwppbXBvcnQgRmlsZUNhcmQgZnJvbSAnQC9jb21wb25lbnRzL0ZpbGVDYXJkLnZ1ZScKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRQb3J0cmFpdCwKICAgIEVtb2ppLAogICAgRmlsZUNhcmQsCiAgfSwKICBwcm9wczogewogICAgZnJpbmVkSW5mbzogT2JqZWN0LAogICAgZGVmYXVsdCgpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBmcmluZWRJbmZvKCkgewogICAgICB0aGlzLmdldEZyaWVuZENoYXRNc2coKTsKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhdExpc3Q6IFtdLAogICAgICBpbnB1dE1zZzogIiIsCiAgICAgIHNob3dFbW9qaTogZmFsc2UsCiAgICAgIGZyaWVuZEluZm86IHt9LAogICAgICBzcmNJbWdMaXN0OiBbXSwKICAgICAgaXNTZW5kOiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldEZyaWVuZENoYXRNc2coKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v6I635Y+W6IGK5aSp6K6w5b2VCiAgICBnZXRGcmllbmRDaGF0TXNnKCkgewogICAgICBsZXQgaW5pdGFsTXNnID0gewogICAgICAgIGhlYWRJbWc6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9oZWFkX3BvcnRyYWl0MS5qcGcnKSwKICAgICAgICBuYW1lOiAn5Yek6ZuPJywKICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpLAogICAgICAgIG1zZzogJ+S9oOWlve+8jOWwj+WHpOS4uuS9oOacjeWKoScsCiAgICAgICAgY2hhdFR5cGU6IDAsIC8v5L+h5oGv57G75Z6L77yMMOaWh+Wtl++8jDHlm77niYcKICAgICAgICB1aWQ6ICcxMDAyJyAvL3VpZAogICAgICB9OwogICAgICB0aGlzLnNlbmRNc2coaW5pdGFsTXNnKTsKICAgICAgdGhpcy5zY3JvbGxCb3R0b20oKTsKICAgIH0sCiAgICAvL+WPkemAgeS/oeaBrwogICAgc2VuZE1zZyhtc2dMaXN0KSB7CiAgICAgIHRoaXMuY2hhdExpc3QucHVzaChtc2dMaXN0KTsKICAgICAgdGhpcy5zY3JvbGxCb3R0b20oKTsKICAgIH0sCiAgICAvL+iOt+WPlueql+WPo+mrmOW6puW5tua7muWKqOiHs+acgOW6leWxggogICAgc2Nyb2xsQm90dG9tKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgY29uc3Qgc2Nyb2xsRG9tID0gdGhpcy4kcmVmcy5jaGF0Q29udGVudDsKICAgICAgICBhbmltYXRpb24oc2Nyb2xsRG9tLCBzY3JvbGxEb20uc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsRG9tLm9mZnNldEhlaWdodCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5YWz6Zet5qCH562+5qGGCiAgICBjbGlja0Vtb2ppKCkgewogICAgICB0aGlzLnNob3dFbW9qaSA9ICF0aGlzLnNob3dFbW9qaTsKICAgIH0sCiAgICAvL+WPkemAgeaWh+Wtl+S/oeaBrwogICAgc2VuZFRleHQoKSB7CiAgICAgIGlmICh0aGlzLmlucHV0TXNnKSB7CiAgICAgICAgbGV0IGNoYXRNc2cgPSB7CiAgICAgICAgICBoZWFkSW1nOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvaGVhZF9wb3J0cmFpdC5qcGciKSwKICAgICAgICAgIG5hbWU6ICLljafpvpkiLAogICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKSwKICAgICAgICAgIG1zZzogdGhpcy5pbnB1dE1zZywKICAgICAgICAgIGNoYXRUeXBlOiAwLCAvL+S/oeaBr+exu+Wei++8jDDmloflrZfvvIwx5Zu+54mHCiAgICAgICAgICB1aWQ6ICIxMDAxIiwgLy91aWQKICAgICAgICB9OwogICAgICAgIHRoaXMuc2VuZE1zZyhjaGF0TXNnKTsKICAgICAgICB0aGlzLiRlbWl0KCdwZXJzb25DYXJkU29ydCcsIHRoaXMuZnJpbmVkSW5mby5pZCkKICAgICAgICB0aGlzLmlucHV0TXNnID0gIiI7CiAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICBwcm9tcHQ6IGNoYXRNc2cubXNnLAogICAgICAgICAgdGVtcGVyYXR1cmU6IDEsCiAgICAgICAgICB0b3BfcDogMSwKICAgICAgICAgIG1vZGVsOiAndGV4dC1kYXZpbmNpLTAwMycsCiAgICAgICAgICBtYXhfdG9rZW5zOiAyMDQ4LAogICAgICAgICAgZnJlcXVlbmN5X3BlbmFsdHk6IDAsCiAgICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiAwLAogICAgICAgICAgc3RvcDogWyJIdW1hbjoiLCAiQUk6Il0KICAgICAgICB9CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICAgIHRoaXMuaXNTZW5kID0gdHJ1ZTsKICAgICAgICBsZXQgY2hhdEdQVCA9IHsKICAgICAgICAgIGhlYWRJbWc6IHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9oZWFkX3BvcnRyYWl0MS5qcGciKSwKICAgICAgICAgIG5hbWU6ICLlh6Tpm48iLAogICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKSwKICAgICAgICAgIG1zZzogIiIsCiAgICAgICAgICBjaGF0VHlwZTogMCwgLy/kv6Hmga/nsbvlnovvvIww5paH5a2X77yMMeWbvueJhwogICAgICAgICAgdWlkOiAiMTAwMiIsIC8vdWlkCiAgICAgICAgfTsKICAgICAgICB0aGlzLnNlbmRNc2coY2hhdEdQVCk7CiAgICAgICAgdGhpcy5pc1NlbmQgPSBmYWxzZTsKICAgICAgICB0aGlzLmNoYXRMaXN0W3RoaXMuY2hhdExpc3QubGVuZ3RoIC0gMV0ubXNnID0gIuWlveeahO+8jOW3suWujOaIkOOAgiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAi5raI5oGv5LiN6IO95Li656m65ZOmfiIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvL+WPkemAgeihqOaDhQogICAgc2VuZEVtb2ppKG1zZykgewogICAgICBsZXQgY2hhdE1zZyA9IHsKICAgICAgICBoZWFkSW1nOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvaGVhZF9wb3J0cmFpdC5qcGciKSwKICAgICAgICBuYW1lOiAi5aSn5q+b5piv5bCP55m9IiwKICAgICAgICB0aW1lOiAiMDnvvJoxMiBBTSIsCiAgICAgICAgbXNnOiBtc2csCiAgICAgICAgY2hhdFR5cGU6IDEsIC8v5L+h5oGv57G75Z6L77yMMOaWh+Wtl++8jDHlm77niYcKICAgICAgICBleHRlbmQ6IHsKICAgICAgICAgIGltZ1R5cGU6IDEsIC8vKDHooajmg4XvvIwy5pys5Zyw5Zu+54mHKQogICAgICAgIH0sCiAgICAgICAgdWlkOiAiMTAwMSIsCiAgICAgIH07CiAgICAgIHRoaXMuc2VuZE1zZyhjaGF0TXNnKTsKICAgICAgdGhpcy5jbGlja0Vtb2ppKCk7CiAgICB9LAogICAgLy/lj5HpgIHmnKzlnLDlm77niYcKICAgIHNlbmRJbWcoZSkgewogICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5maWxlcyk7CiAgICAgIGxldCBjaGF0TXNnID0gewogICAgICAgIGhlYWRJbWc6IHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9oZWFkX3BvcnRyYWl0LmpwZyIpLAogICAgICAgIG5hbWU6ICLlpKfmr5vmmK/lsI/nmb0iLAogICAgICAgIHRpbWU6ICIwOe+8mjEyIEFNIiwKICAgICAgICBtc2c6ICIiLAogICAgICAgIGNoYXRUeXBlOiAxLCAvL+S/oeaBr+exu+Wei++8jDDmloflrZfvvIwx5Zu+54mHLCAy5paH5Lu2CiAgICAgICAgZXh0ZW5kOiB7CiAgICAgICAgICBpbWdUeXBlOiAyLCAvLygx6KGo5oOF77yMMuacrOWcsOWbvueJhykKICAgICAgICB9LAogICAgICAgIHVpZDogIjEwMDEiLAogICAgICB9OwogICAgICBsZXQgZmlsZXMgPSBlLnRhcmdldC5maWxlc1swXTsgLy/lm77niYfmlofku7blkI0KICAgICAgaWYgKCFlIHx8ICF3aW5kb3cuRmlsZVJlYWRlcikgcmV0dXJuOyAvLyDnnIvmmK/lkKbmlK/mjIFGaWxlUmVhZGVyCiAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlcyk7IC8vIOWFs+mUruS4gOatpe+8jOWcqOi/memHjOi9rOaNoueahAogICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNoYXRNc2cubXNnID0gdGhpcy5yZXN1bHQ7IC8v6LWL5YC8CiAgICAgICAgX3RoaXMuc3JjSW1nTGlzdC5wdXNoKGNoYXRNc2cubXNnKTsKICAgICAgfTsKICAgICAgdGhpcy5zZW5kTXNnKGNoYXRNc2cpOwogICAgICBlLnRhcmdldC5maWxlcyA9IG51bGw7CiAgICB9LAogICAgLy/lj5HpgIHmlofku7YKICAgIHNlbmRGaWxlKGUpIHsKICAgICAgbGV0IGNoYXRNc2cgPSB7CiAgICAgICAgaGVhZEltZzogcmVxdWlyZSgiQC9hc3NldHMvaW1nL2hlYWRfcG9ydHJhaXQuanBnIiksCiAgICAgICAgbmFtZTogIuWkp+avm+aYr+Wwj+eZvSIsCiAgICAgICAgdGltZTogIjA577yaMTIgQU0iLAogICAgICAgIG1zZzogIiIsCiAgICAgICAgY2hhdFR5cGU6IDIsIC8v5L+h5oGv57G75Z6L77yMMOaWh+Wtl++8jDHlm77niYcsIDLmlofku7YKICAgICAgICBleHRlbmQ6IHsKICAgICAgICAgIGZpbGVUeXBlOiAiIiwgLy8oMXdvcmTvvIwyZXhjZWzvvIwzcHB077yMNHBkZu+8jDV6cGksIDZ0eHQpCiAgICAgICAgfSwKICAgICAgICB1aWQ6ICIxMDAxIiwKICAgICAgfTsKICAgICAgbGV0IGZpbGVzID0gZS50YXJnZXQuZmlsZXNbMF07IC8v5Zu+54mH5paH5Lu25ZCNCiAgICAgIGNoYXRNc2cubXNnID0gZmlsZXM7CiAgICAgIGNvbnNvbGUubG9nKGZpbGVzKTsKICAgICAgaWYgKGZpbGVzKSB7CiAgICAgICAgc3dpdGNoIChmaWxlcy50eXBlKSB7CiAgICAgICAgICBjYXNlICJhcHBsaWNhdGlvbi9tc3dvcmQiOgogICAgICAgICAgY2FzZSAiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQiOgogICAgICAgICAgICBjaGF0TXNnLmV4dGVuZC5maWxlVHlwZSA9IDE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsIjoKICAgICAgICAgIGNhc2UgImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0IjoKICAgICAgICAgICAgY2hhdE1zZy5leHRlbmQuZmlsZVR5cGUgPSAyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImFwcGxpY2F0aW9uL3ZuZC5tcy1wb3dlcnBvaW50IjoKICAgICAgICAgIGNhc2UgImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC5wcmVzZW50YXRpb24iOgogICAgICAgICAgICBjaGF0TXNnLmV4dGVuZC5maWxlVHlwZSA9IDM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiYXBwbGljYXRpb24vcGRmIjoKICAgICAgICAgICAgY2hhdE1zZy5leHRlbmQuZmlsZVR5cGUgPSA0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImFwcGxpY2F0aW9uL3ppcCI6CiAgICAgICAgICBjYXNlICJhcHBsaWNhdGlvbi94LXppcC1jb21wcmVzc2VkIjoKICAgICAgICAgICAgY2hhdE1zZy5leHRlbmQuZmlsZVR5cGUgPSA1OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInRleHQvcGxhaW4iOgogICAgICAgICAgICBjaGF0TXNnLmV4dGVuZC5maWxlVHlwZSA9IDY7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgY2hhdE1zZy5leHRlbmQuZmlsZVR5cGUgPSAwOwogICAgICAgIH0KICAgICAgICB0aGlzLnNlbmRNc2coY2hhdE1zZyk7CiAgICAgICAgZS50YXJnZXQuZmlsZXMgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgLy8g5Y+R6YCB6K+t6Z+zCiAgICB0ZWxlcGhvbmUoKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoIuivpeWKn+iDvei/mOayoeacieW8gOWPkeWTpu+8jOaVrOivt+acn+W+heS4gOS4i+WQp37wn6WzIik7CiAgICB9LAogICAgLy/lj5HpgIHop4bpopEKICAgIHZpZGVvKCkgewogICAgICB0aGlzLiRtZXNzYWdlKCLor6Xlip/og73ov5jmsqHmnInlvIDlj5Hlk6bvvIzmlazor7fmnJ/lvoXkuIDkuIvlkKd+8J+lsyIpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["chatwindow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chatwindow.vue","sourceRoot":"src/views/pages/chatHome","sourcesContent":["<template>\n  <div class=\"chat-window\">\n    <div class=\"top\">\n      <div class=\"head-pic\">\n        <HeadPortrait :imgUrl=\"frinedInfo.headImg\"></HeadPortrait>\n      </div>\n      <div class=\"info-detail\">\n        <div class=\"name\">{{ frinedInfo.name }}</div>\n        <div class=\"detail\">{{ frinedInfo.detail }}</div>\n      </div>\n      <div class=\"other-fun\">\n        <span class=\"iconfont icon-shipin\" @click=\"video\"> </span>\n        <span class=\"iconfont icon-gf-telephone\" @click=\"telephone\"></span>\n        <label for=\"docFile\">\n          <span class=\"iconfont icon-wenjian\"></span>\n        </label>\n        <label for=\"imgFile\">\n          <span class=\"iconfont icon-tupian\"></span>\n        </label>\n        <input type=\"file\" name=\"\" id=\"imgFile\" @change=\"sendImg\" accept=\"image/*\" />\n        <input type=\"file\" name=\"\" id=\"docFile\" @change=\"sendFile\" accept=\"application/*,text/*\" />\n        <!-- accept=\"application/*\" -->\n      </div>\n    </div>\n    <div class=\"botoom\">\n      <div class=\"chat-content\" ref=\"chatContent\">\n        <div class=\"chat-wrapper\" v-for=\"(item, index) in chatList\" :key=\"item.id\">\n          <div class=\"chat-friend\" v-if=\"item.uid !== '1001'\">\n            <div class=\"info-time\">\n              <img :src=\"item.headImg\" alt=\"\" />\n              <span>{{ item.name }}</span>\n              <span>{{ item.time }}</span>\n            </div>\n            <div class=\"chat-text\" v-if=\"item.chatType == 0\">\n              <template v-if=\"isSend && index == chatList.length - 1\">\n                <span class=\"flash_cursor\"></span>\n              </template>\n              <template v-else><pre>{{ item.msg }}</pre></template>\n            </div>\n            <div class=\"chat-img\" v-if=\"item.chatType == 1\">\n              <img :src=\"item.msg\" alt=\"表情\" v-if=\"item.extend.imgType == 1\" style=\"width: 100px; height: 100px\" />\n              <el-image :src=\"item.msg\" :preview-src-list=\"srcImgList\" v-else>\n              </el-image>\n            </div>\n            <div class=\"chat-img\" v-if=\"item.chatType == 2\">\n              <div class=\"word-file\">\n                <FileCard :fileType=\"item.extend.fileType\" :file=\"item.msg\"></FileCard>\n              </div>\n            </div>\n          </div>\n          <div class=\"chat-me\" v-else>\n            <div class=\"info-time\">\n              <span>{{ item.name }}</span>\n              <span>{{ item.time }}</span>\n              <img :src=\"item.headImg\" alt=\"\" />\n            </div>\n            <div class=\"chat-text\" v-if=\"item.chatType == 0\">\n              {{ item.msg }}\n            </div>\n            <div class=\"chat-img\" v-if=\"item.chatType == 1\">\n              <img :src=\"item.msg\" alt=\"表情\" v-if=\"item.extend.imgType == 1\" style=\"width: 100px; height: 100px\" />\n              <el-image\n                style=\"max-width: 300px; border-radius: 10px\"\n                :src=\"item.msg\"\n                :preview-src-list=\"srcImgList\"\n                v-else>\n              </el-image>\n            </div>\n            <div class=\"chat-img\" v-if=\"item.chatType == 2\">\n              <div class=\"word-file\">\n                <FileCard :fileType=\"item.extend.fileType\" :file=\"item.msg\"></FileCard>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"chatInputs\">\n        <input class=\"inputs\" v-model=\"inputMsg\" @keyup.enter=\"sendText\" />\n        <el-button class=\"send boxinput\" :disabled = \"isSend\" @click=\"sendText\">\n          <img src=\"@/assets/img/emoji/rocket.png\" alt=\"\" />\n        </el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { animation } from '@/utils/util'\n\nimport HeadPortrait from '@/components/HeadPortrait.vue'\nimport Emoji from '@/components/Emoji.vue'\nimport FileCard from '@/components/FileCard.vue'\nexport default {\n  components: {\n    HeadPortrait,\n    Emoji,\n    FileCard,\n  },\n  props: {\n    frinedInfo: Object,\n    default() {\n      return {};\n    },\n  },\n  watch: {\n    frinedInfo() {\n      this.getFriendChatMsg();\n    },\n  },\n  data() {\n    return {\n      chatList: [],\n      inputMsg: \"\",\n      showEmoji: false,\n      friendInfo: {},\n      srcImgList: [],\n      isSend: false\n    };\n  },\n  mounted() {\n    this.getFriendChatMsg();\n  },\n  methods: {\n    //获取聊天记录\n    getFriendChatMsg() {\n      let initalMsg = {\n        headImg: require('@/assets/img/head_portrait1.jpg'),\n        name: '凤雏',\n        time: new Date().toLocaleTimeString(),\n        msg: '你好，小凤为你服务',\n        chatType: 0, //信息类型，0文字，1图片\n        uid: '1002' //uid\n      };\n      this.sendMsg(initalMsg);\n      this.scrollBottom();\n    },\n    //发送信息\n    sendMsg(msgList) {\n      this.chatList.push(msgList);\n      this.scrollBottom();\n    },\n    //获取窗口高度并滚动至最底层\n    scrollBottom() {\n      this.$nextTick(() => {\n        const scrollDom = this.$refs.chatContent;\n        animation(scrollDom, scrollDom.scrollHeight - scrollDom.offsetHeight);\n      });\n    },\n    //关闭标签框\n    clickEmoji() {\n      this.showEmoji = !this.showEmoji;\n    },\n    //发送文字信息\n    sendText() {\n      if (this.inputMsg) {\n        let chatMsg = {\n          headImg: require(\"@/assets/img/head_portrait.jpg\"),\n          name: \"卧龙\",\n          time: new Date().toLocaleTimeString(),\n          msg: this.inputMsg,\n          chatType: 0, //信息类型，0文字，1图片\n          uid: \"1001\", //uid\n        };\n        this.sendMsg(chatMsg);\n        this.$emit('personCardSort', this.frinedInfo.id)\n        this.inputMsg = \"\";\n        let data = {\n          prompt: chatMsg.msg,\n          temperature: 1,\n          top_p: 1,\n          model: 'text-davinci-003',\n          max_tokens: 2048,\n          frequency_penalty: 0,\n          presence_penalty: 0,\n          stop: [\"Human:\", \"AI:\"]\n        }\n        this.loading = true\n        this.isSend = true;\n        let chatGPT = {\n          headImg: require(\"@/assets/img/head_portrait1.jpg\"),\n          name: \"凤雏\",\n          time: new Date().toLocaleTimeString(),\n          msg: \"\",\n          chatType: 0, //信息类型，0文字，1图片\n          uid: \"1002\", //uid\n        };\n        this.sendMsg(chatGPT);\n        this.isSend = false;\n        this.chatList[this.chatList.length - 1].msg = \"好的，已完成。\";\n      } else {\n        this.$message({\n          message: \"消息不能为空哦~\",\n          type: \"warning\",\n        });\n      }\n    },\n    //发送表情\n    sendEmoji(msg) {\n      let chatMsg = {\n        headImg: require(\"@/assets/img/head_portrait.jpg\"),\n        name: \"大毛是小白\",\n        time: \"09：12 AM\",\n        msg: msg,\n        chatType: 1, //信息类型，0文字，1图片\n        extend: {\n          imgType: 1, //(1表情，2本地图片)\n        },\n        uid: \"1001\",\n      };\n      this.sendMsg(chatMsg);\n      this.clickEmoji();\n    },\n    //发送本地图片\n    sendImg(e) {\n      let _this = this;\n      console.log(e.target.files);\n      let chatMsg = {\n        headImg: require(\"@/assets/img/head_portrait.jpg\"),\n        name: \"大毛是小白\",\n        time: \"09：12 AM\",\n        msg: \"\",\n        chatType: 1, //信息类型，0文字，1图片, 2文件\n        extend: {\n          imgType: 2, //(1表情，2本地图片)\n        },\n        uid: \"1001\",\n      };\n      let files = e.target.files[0]; //图片文件名\n      if (!e || !window.FileReader) return; // 看是否支持FileReader\n      let reader = new FileReader();\n      reader.readAsDataURL(files); // 关键一步，在这里转换的\n      reader.onloadend = function () {\n        chatMsg.msg = this.result; //赋值\n        _this.srcImgList.push(chatMsg.msg);\n      };\n      this.sendMsg(chatMsg);\n      e.target.files = null;\n    },\n    //发送文件\n    sendFile(e) {\n      let chatMsg = {\n        headImg: require(\"@/assets/img/head_portrait.jpg\"),\n        name: \"大毛是小白\",\n        time: \"09：12 AM\",\n        msg: \"\",\n        chatType: 2, //信息类型，0文字，1图片, 2文件\n        extend: {\n          fileType: \"\", //(1word，2excel，3ppt，4pdf，5zpi, 6txt)\n        },\n        uid: \"1001\",\n      };\n      let files = e.target.files[0]; //图片文件名\n      chatMsg.msg = files;\n      console.log(files);\n      if (files) {\n        switch (files.type) {\n          case \"application/msword\":\n          case \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\n            chatMsg.extend.fileType = 1;\n            break;\n          case \"application/vnd.ms-excel\":\n          case \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\n            chatMsg.extend.fileType = 2;\n            break;\n          case \"application/vnd.ms-powerpoint\":\n          case \"application/vnd.openxmlformats-officedocument.presentationml.presentation\":\n            chatMsg.extend.fileType = 3;\n            break;\n          case \"application/pdf\":\n            chatMsg.extend.fileType = 4;\n            break;\n          case \"application/zip\":\n          case \"application/x-zip-compressed\":\n            chatMsg.extend.fileType = 5;\n            break;\n          case \"text/plain\":\n            chatMsg.extend.fileType = 6;\n            break;\n          default:\n            chatMsg.extend.fileType = 0;\n        }\n        this.sendMsg(chatMsg);\n        e.target.files = null;\n      }\n    },\n    // 发送语音\n    telephone() {\n      this.$message(\"该功能还没有开发哦，敬请期待一下吧~🥳\");\n    },\n    //发送视频\n    video() {\n      this.$message(\"该功能还没有开发哦，敬请期待一下吧~🥳\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.flash_cursor {\n  width: 20px;\n  height: 30px;\n  display: inline-block;\n  background: #d6e3f5;\n  opacity: 1;\n  animation: glow 800ms ease-out infinite alternate;\n}\n\n@keyframes glow {\n  0% {\n    opacity: 1;\n  }\n\n  25% {\n    opacity: .5;\n  }\n\n  50% {\n    opacity: 0;\n  }\n\n  75% {\n    opacity: .5;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.chat-window {\n  width: 100%;\n  height: 100%;\n  margin-left: 20px;\n  position: relative;\n\n  .top {\n    margin-bottom: 50px;\n\n    &::after {\n      content: \"\";\n      display: block;\n      clear: both;\n    }\n\n    .head-pic {\n      float: left;\n    }\n\n    .info-detail {\n      float: left;\n      margin: 5px 20px 0;\n\n      .name {\n        font-size: 20px;\n        font-weight: 600;\n        color: #fff;\n      }\n\n      .detail {\n        color: #9e9e9e;\n        font-size: 12px;\n        margin-top: 2px;\n      }\n    }\n\n    .other-fun {\n      float: right;\n      margin-top: 20px;\n\n      span {\n        margin-left: 30px;\n        cursor: pointer;\n      }\n\n      // .icon-tupian {\n\n      // }\n      input {\n        display: none;\n      }\n    }\n  }\n\n  .botoom {\n    width: 100%;\n    height: 70vh;\n    background-color: rgb(50, 54, 68);\n    border-radius: 20px;\n    padding: 20px;\n    box-sizing: border-box;\n    position: relative;\n\n    .chat-content {\n      width: 100%;\n      height: 85%;\n      overflow-y: scroll;\n      padding: 20px;\n      box-sizing: border-box;\n\n      &::-webkit-scrollbar {\n        width: 0;\n        /* Safari,Chrome 隐藏滚动条 */\n        height: 0;\n        /* Safari,Chrome 隐藏滚动条 */\n        display: none;\n        /* 移动端、pad 上Safari，Chrome，隐藏滚动条 */\n      }\n\n      .chat-wrapper {\n        position: relative;\n        word-break: break-all;\n\n        .chat-friend {\n          width: 100%;\n          float: left;\n          margin-bottom: 20px;\n          display: flex;\n          flex-direction: column;\n          justify-content: flex-start;\n          align-items: flex-start;\n\n          .chat-text {\n            max-width: 90%;\n            padding: 20px;\n            border-radius: 20px 20px 20px 5px;\n            background-color: rgb(56, 60, 75);\n            color: #fff;\n\n            &:hover {\n              background-color: rgb(39, 42, 55);\n            }\n\n            pre{\n              white-space: break-spaces;\n            }\n          }\n\n          .chat-img {\n            img {\n              width: 100px;\n              height: 100px;\n            }\n          }\n\n          .info-time {\n            margin: 10px 0;\n            color: #fff;\n            font-size: 14px;\n\n            img {\n              width: 30px;\n              height: 30px;\n              border-radius: 50%;\n              vertical-align: middle;\n              margin-right: 10px;\n            }\n\n            span:last-child {\n              color: rgb(101, 104, 115);\n              margin-left: 10px;\n              vertical-align: middle;\n            }\n          }\n        }\n\n        .chat-me {\n          width: 100%;\n          float: right;\n          margin-bottom: 20px;\n          position: relative;\n          display: flex;\n          flex-direction: column;\n          justify-content: flex-end;\n          align-items: flex-end;\n\n          .chat-text {\n            float: right;\n            max-width: 90%;\n            padding: 20px;\n            border-radius: 20px 20px 5px 20px;\n            background-color: rgb(29, 144, 245);\n            color: #fff;\n\n            &:hover {\n              background-color: rgb(26, 129, 219);\n            }\n          }\n\n          .chat-img {\n            img {\n              max-width: 300px;\n              max-height: 200px;\n              border-radius: 10px;\n            }\n          }\n\n          .info-time {\n            margin: 10px 0;\n            color: #fff;\n            font-size: 14px;\n            display: flex;\n            justify-content: flex-end;\n\n            img {\n              width: 30px;\n              height: 30px;\n              border-radius: 50%;\n              vertical-align: middle;\n              margin-left: 10px;\n            }\n\n            span {\n              line-height: 30px;\n            }\n\n            span:first-child {\n              color: rgb(101, 104, 115);\n              margin-right: 10px;\n              vertical-align: middle;\n            }\n          }\n        }\n      }\n    }\n\n    .chatInputs {\n      width: 90%;\n      position: absolute;\n      bottom: 0;\n      margin: 3%;\n      display: flex;\n\n      .boxinput {\n        width: 50px;\n        height: 50px;\n        background-color: rgb(66, 70, 86);\n        border-radius: 15px;\n        border: 1px solid rgb(80, 85, 103);\n        position: relative;\n        cursor: pointer;\n\n        img {\n          width: 30px;\n          height: 30px;\n          position: absolute;\n          left: 50%;\n          top: 50%;\n          transform: translate(-50%, -50%);\n        }\n      }\n\n      .emoji {\n        transition: 0.3s;\n\n        &:hover {\n          background-color: rgb(46, 49, 61);\n          border: 1px solid rgb(71, 73, 82);\n        }\n      }\n\n      .inputs {\n        width: 90%;\n        height: 50px;\n        background-color: rgb(66, 70, 86);\n        border-radius: 15px;\n        border: 2px solid rgb(34, 135, 225);\n        padding: 10px;\n        box-sizing: border-box;\n        transition: 0.2s;\n        font-size: 20px;\n        color: #fff;\n        font-weight: 100;\n        margin: 0 20px;\n\n        &:focus {\n          outline: none;\n        }\n      }\n\n      .send {\n        background-color: rgb(29, 144, 245);\n        border: 0;\n        transition: 0.3s;\n        box-shadow: 0px 0px 5px 0px rgba(0, 136, 255);\n\n        &:hover {\n          box-shadow: 0px 0px 10px 0px rgba(0, 136, 255);\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}